"use client";

import { useState } from "react";
import { ChevronDown, ChevronUp, BookOpen } from "lucide-react";

interface GuideSection {
    title: string;
    content: {
        subtitle?: string;
        items: string[];
    }[];
}

const GUIDE_DATA: GuideSection[] = [
    {
        title: "1. 카시트",
        content: [
            {
                subtitle: "1) 왜 반드시 필요한가",
                items: [
                    "도로교통법상 만 6세 미만은 카시트 착용 의무, 실질적으로는 키 145cm·12세까지 사용 권장입니다.",
                    "충돌 시 아이의 머리·목·척추 보호를 위해 안전벨트만으로는 부족합니다."
                ]
            },
            {
                subtitle: "2) 종류별 개요",
                items: [
                    "신생아 카시트(인펀트): 0~12개월 전후, 휴대·호환 편리, 후방 설치만.",
                    "컨버터블(유아용 겸용): 신생아 이너시트 포함 시 출생~6세까지 사용 가능, 후방/전방 겸용.",
                    "주니어 카시트/부스터: 약 4세~12세, 등받이·부스터 형태, 차량 3점식 벨트 사용."
                ]
            },
            {
                subtitle: "3) 핵심 체크포인트",
                items: [
                    "안전 인증: UN-ECE R44, 최신 규격 R129(i-Size) 여부 확인. R129는 측면충돌·후방장착 기간 강화, 키 기준 사용으로 더 엄격합니다.",
                    "후방장착 기간: 가능하면 최소 15개월, 가능하면 3~4세(키 105cm 전후)까지 후방장착 허용 모델 권장.",
                    "장착 방식: ISOFIX vs 차량 안전벨트 고정. 자차가 ISOFIX 지원이면 ISOFIX + 탑테더 방식이 설치 실수 가능성이 적습니다.",
                    "차량과의 호환성: 실제 차량 뒷좌석 폭, 도어 개폐 각도, 리클라이닝 각도를 감안하여 매장 시트로 직접 테스트 설치 권장.",
                    "아이 체형 적합성: 헤드레스트 최저·최고 높이, 어깨벨트 위치, 허벅지 지지 길이 등을 실제 아이를 앉혀 보고 확인.",
                    "세탁·유지관리: 커버 완전 분리 세탁 가능 여부, 생활방수·방오(anti-stain) 기능, 여름용 쿨시트/겨울용 풋머프 호환."
                ]
            },
            {
                subtitle: "4) 추천 선택 전략",
                items: [
                    "차 1대 + 첫째 0~1세: R129 적용 컨버터블 카시트로 생애 첫 카시트 선택(후방 장착 기간 최대한 길게).",
                    "차 2대 이상/모빌리티 많음: 신생아용 카시트 + ISOFIX 베이스 + 이후 주니어 카시트 조합."
                ]
            }
        ]
    },
    {
        title: "2. 유모차",
        content: [
            {
                subtitle: "1) 종류",
                items: [
                    "신생아용/디럭스형(절충형): 차체는 무거우나 승차감·안정성 우수, 0개월~3세 전후.",
                    "휴대용(기내반입형 포함): 경량, 접이 편리, 보통 생후 6개월 이후 사용 권장.",
                    "트래블 시스템: 신생아 카시트가 유모차 프레임에 바로 결합되는 형태."
                ]
            },
            {
                subtitle: "2) 안전·품질 기준",
                items: [
                    "유모차는 어린이제품 안전확인 대상으로 별도의 유모차 안전기준이 존재합니다."
                ]
            },
            {
                subtitle: "3) 체크포인트",
                items: [
                    "연령/체중 기준: 완전 평면(신생아 모드) 지원 여부, 최대 허용체중(15kg/22kg 등).",
                    "브레이크·안정성: 바퀴 잠금장치, 경사면에서 굴러가지 않는지, 프레임 휘청거림 여부.",
                    "무게 vs 접이성: 엘리베이터 없는 빌라/계단 많은 환경이면 4~6kg급 경량 휴대용이 실사용성이 높습니다.",
                    "서스펜션·바퀴 사이즈: 아스팔트·보도블록 많은 한국 환경에서는 바퀴가 너무 작으면 흔들림·충격이 크므로, 앞바퀴 지름·서스펜션 구조를 꼭 비교해 보시는 것이 좋습니다.",
                    "햇빛·바람 차단: 캐노피 확장 길이, 통풍창(메시), 자외선 차단 원단 여부.",
                    "세탁·내구성: 시트 분리 세탁 가능 여부, 프레임 도장 긁힘, 바퀴 교체 용이성."
                ]
            },
            {
                subtitle: "4) 선택 전략",
                items: [
                    "도심·쇼핑몰 위주, 차 자주 사용 → 절충형 1대 + 초경량 휴대용은 나중에 보완",
                    "대중교통 많이 이용, 엘리베이터 없음 → 생후 6개월 이후 라면 고급 휴대용, 그 전 시기는 슬링/캐리어 병행"
                ]
            }
        ]
    },
    {
        title: "3. 아기침대·침구",
        content: [
            {
                subtitle: "1) 안전 기준",
                items: [
                    "유아용 침대 또한 어린이제품 안전확인 대상이며 별도의 안전기준(난간 간격, 구조 안정성 등)이 있습니다."
                ]
            },
            {
                subtitle: "2) 체크포인트",
                items: [
                    "난간 간격·높이: 난간 사이로 머리·몸이 끼지 않도록 규격이 정해져 있습니다. 매트리스 높이를 조절할 수 있어야, 아이 성장에 따라 추락 위험을 줄일 수 있습니다.",
                    "매트리스: 너무 푹신하면 질식 위험, 적당히 단단한 매트리스가 권장됩니다.",
                    "도료·자재: 친환경 도료 사용 여부, 강한 냄새(휘발성유기화합물) 유무.",
                    "공간·동선: 침대 크기 + 난간 여닫이 방향이 방 구조와 맞는지, 밤 수유 동선이 편한지."
                ]
            },
            {
                subtitle: "3) 공용침대 vs 단독침대",
                items: [
                    "한국에서는 공간 제약으로 부모 침대에 사이드카 형태로 붙이는 제품도 많습니다.",
                    "무엇을 선택하든 낙상·질식·끼임 위험을 최소화하는 구조인지가 가장 중요합니다."
                ]
            }
        ]
    },
    {
        title: "4. 플레이매트(층간소음 매트 포함)",
        content: [
            {
                subtitle: "1) 핵심 기준",
                items: [
                    "두께·충격흡수: 점프·낙상 시 충격 흡수, 층간소음 완화를 함께 고려합니다.",
                    "소재·유해물질: PVC, PE폼, 우레탄 등 소재별로 냄새·유해물질 이슈가 있을 수 있으므로, KC 안전확인, 휘발성유기화합물(VOCs)·가소제·중금속 시험 여부를 확인하십시오.",
                    "청소·방수: 토·배변 사고를 고려해 완전 방수, 이음새 최소, 겉면 내구성이 중요합니다.",
                    "사이즈/조합: 거실·방 크기에 맞게 모듈형/시공형 선택, 문턱·기둥 주변 처리 방식 고려."
                ]
            },
            {
                subtitle: "2) 한국형 선택 팁",
                items: [
                    "아파트·빌라 층간소음 이슈가 크므로, 두께 + 밀도 + 시공 방식을 함께 봐야 합니다.",
                    "시공형의 경우 재시공·철거 용이성, 바닥 난방과의 궁합도 확인하십시오."
                ]
            }
        ]
    },
    {
        title: "5. 수유용품 (젖병, 젖병소독기, 유축기 등)",
        content: [
            {
                subtitle: "1) 젖병",
                items: [
                    "소재: PPSU, 트라이탄, 유리 등. 가볍고 내구성 좋은 PPSU가 인기지만, 열탕·전자레인지 사용 가능 범위를 확인해야 합니다.",
                    "젖꼭지: 유량 단계(SS~L 등)와 아이 빨기 습관에 맞는 구멍 형태(원형/십자) 선택.",
                    "내부 눈금 정확도: 분유 조제 시 오차를 줄이기 위해 눈금 선명·정확 여부 체크."
                ]
            },
            {
                subtitle: "2) 젖병 소독기/세척기",
                items: [
                    "살균 방식: UV-C, 열탕/스팀, 열풍, 복합 방식 등. 영유아 제품용 UV 소독기는 파장(주로 254nm 근처)과 출력, 균일 비춤 구조가 중요합니다.",
                    "안전성: 전기용품 KC 안전인증, 과열방지·문열림 감지 센서 여부.",
                    "편의성: 건조 + 보관 기능, 선반 구성, 세척 편의성(물받이, 필터, 내부 청소)."
                ]
            },
            {
                subtitle: "3) 유축기",
                items: [
                    "전동 vs 수동: 잦은 유축이 필요하면 이중 전동(양측 동시) 추천.",
                    "자극 모드/흡입 단계: 모드시퀀스(자극→흡입), 세밀한 단계 조절 여부.",
                    "소음·휴대성: 야간·외출 유축을 고려한 소음·무게·배터리 사용 시간."
                ]
            }
        ]
    },
    {
        title: "6. 기저귀 & 기저귀 관련 용품",
        content: [
            {
                subtitle: "1) 일회용 기저귀",
                items: [
                    "피부 반응: 붉어짐, 발진 여부를 1~2팩 사용하며 체크 후 대량 구매 권장.",
                    "흡수력·통기성: 밤기저귀/주간용 구분, 샘 방지 구조, 등허리 새는지 여부.",
                    "사이즈: 체중 표기는 참고값일 뿐, 허리·허벅지 자국·샘 여부를 보고 한 단계 조정."
                ]
            },
            {
                subtitle: "2) 기저귀 교환대·기저귀 쓰레기통",
                items: [
                    "난간·안전벨트 유무, 뒤집는 시기에 넘어짐 방지 구조 확인.",
                    "쓰레기통은 탈취 성능, 비닐 교체 비용, 분리배출 편의성까지 고려."
                ]
            }
        ]
    },
    {
        title: "7. 아기 목욕·위생용품",
        content: [
            {
                subtitle: "1) 아기 욕조",
                items: [
                    "미끄럼 방지: 바닥 패턴, 등 받침 구조 확인.",
                    "물 온도: 온도센서 플러그, 온도계 포함 여부. 물 온도 37~38℃ 전후 유지가 일반적입니다.",
                    "보관: 접이식 vs 고정식, 욕실 공간에 맞는지."
                ]
            },
            {
                subtitle: "2) 목욕·스킨케어",
                items: [
                    "전성분 확인: 보존제, 향료, 계면활성제 종류를 확인하고, 최소 성분/저자극 라인을 우선 고려.",
                    "pH·피부 장벽: 신생아는 피부 장벽이 미성숙하므로, 세정력보다는 보습 중심·저 자극이 중요합니다."
                ]
            }
        ]
    },
    {
        title: "8. 공기청정기·가습기 (아기방 환경)",
        content: [
            {
                subtitle: "1) 공기청정기",
                items: [
                    "필터 안전성: 최근 조사에서 일부 공기청정기 필터에서 사용금지 물질이 검출된 사례가 있어, 공기청정기 필터의 안전성·인증 정보 확인이 중요합니다.",
                    "설치 위치: 흡입구·배출구가 가구·커튼에 막히지 않도록 하고, 가습기와는 떨어뜨려 설치해야 합니다.",
                    "환기 병행: 공기청정기만으로 CO₂, 휘발성유기화합물 제거가 어렵기 때문에, 하루 3번 이상 창문 환기가 권장됩니다."
                ]
            },
            {
                subtitle: "2) 가습기",
                items: [
                    "가열식 vs 초음파식 vs 복합식: 가열식은 세균 문제는 상대적으로 적지만, 고온 증기·본체 표면·뜨거운 물 유출로 인한 화상사고 위험이 커 영유아 주변 사용 시 특히 주의가 필요합니다. 아기 손이 닿지 않는 위치, 단단한 바닥, 전선 정리 필수.",
                    "세척 용이성: 내부 구조가 단순하고, 살균·헹굼이 쉬운 제품을 선택해야 세균 증식을 줄일 수 있습니다."
                ]
            }
        ]
    },
    {
        title: "9. 아기띠·캐리어",
        content: [
            {
                subtitle: "1) 안전·인체공학 기준",
                items: [
                    "유럽·미국 안전기준 EN 13209-2, ASTM F2236 준수 여부, 직물의 Oeko-Tex Standard 100 1등급 인증 여부 등을 확인하면, 피부 접촉·구강 접촉에도 안전한 수준인지 판단에 도움이 됩니다.",
                    "국제 고관절협회(IHDI)에서 “고관절에 안전함” 등급을 받은 제품은 아이 다리·고관절을 M자 자세로 지지하는 구조인지 검증된 사례로 볼 수 있습니다."
                ]
            },
            {
                subtitle: "2) 체크포인트",
                items: [
                    "착용자 체형 적합성: 어깨·허리 벨트 패드 두께, 허리둘레 범위, 키에 따른 위치 조절.",
                    "아기 자세: 다리 M자, 척추 C자 곡선을 유지할 수 있는지, 목 받침·헤드 서포트 구조.",
                    "사용 환경: 여름용은 통기성, 겨울용은 보온 커버의 분리형 여부."
                ]
            }
        ]
    },
    {
        title: "10. 제품별 예산·우선순위 제안 (출산~3세 기준)",
        content: [
            {
                subtitle: "1) 최우선 투자 (반드시 품질·안전에 가장 많은 예산 배정)",
                items: [
                    "카시트",
                    "유모차(실사용 비중이 높은 1대)",
                    "플레이매트/층간소음 매트(아파트·빌라 환경)"
                ]
            },
            {
                subtitle: "2) 중요도 높음 (중상급 이상 추천)",
                items: [
                    "아기침대·매트리스",
                    "젖병·소독기(모유/분유 비율에 따라)",
                    "아기띠·캐리어"
                ]
            },
            {
                subtitle: "3) 중요도 중간 (생활 패턴에 따라 선택)",
                items: [
                    "공기청정기·가습기 (이미 가전이 있다면 아기방 설치 위치·필터 관리에 집중)",
                    "기저귀 쓰레기통, 전용 교환대"
                ]
            },
            {
                subtitle: "4) 중요도 선택 (브랜드·디자인 취향 비중이 큼)",
                items: [
                    "욕조/목욕용품, 스킨케어, 수유쿠션, 식탁의자 등 (안전 기본을 충족하면 디자인·편의성 위주 선택)"
                ]
            }
        ]
    }
];

export default function BuyingGuide() {
    const [openIndex, setOpenIndex] = useState<number | null>(null);

    return (
        <div className="flex-col gap-4 mt-8">
            <div className="flex-center gap-2 mb-2">
                <BookOpen size={24} color="var(--primary)" />
                <h2 className="text-h2">제품별 구매 가이드</h2>
            </div>
            <p className="text-sm text-secondary mb-4">
                초보 부모를 위한 필수 육아용품 선택 기준과 팁을 확인하세요.
            </p>

            <div className="flex-col gap-2">
                {GUIDE_DATA.map((section, idx) => (
                    <div key={idx} className="card" style={{ padding: 0, overflow: "hidden" }}>
                        <button
                            onClick={() => setOpenIndex(openIndex === idx ? null : idx)}
                            className="flex-between w-full p-4"
                            style={{ width: "100%", background: "var(--surface)", cursor: "pointer" }}
                        >
                            <span className="text-h3" style={{ fontSize: 16 }}>{section.title}</span>
                            {openIndex === idx ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
                        </button>

                        {openIndex === idx && (
                            <div className="p-4" style={{ borderTop: "1px solid var(--border)", background: "var(--background)" }}>
                                {section.content.map((block, bIdx) => (
                                    <div key={bIdx} className="mb-4 last:mb-0">
                                        {block.subtitle && (
                                            <h4 className="font-bold text-sm mb-2" style={{ color: "var(--primary)" }}>
                                                {block.subtitle}
                                            </h4>
                                        )}
                                        <ul style={{ paddingLeft: 20, listStyleType: "disc" }}>
                                            {block.items.map((item, iIdx) => (
                                                <li key={iIdx} className="text-sm text-secondary mb-1" style={{ lineHeight: 1.6 }}>
                                                    {item}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                ))}
            </div>
        </div>
    );
}
